# TIL Template

## 날짜: 2025-02-06

### 스크럼
- 학습 목표 1 : 네트워크 보안 정리
- 학습 목표 2 : 패킷 트레이서 과제 완료
- 학습 목표 3

### 새로 배운 내용
#### 주제 1: 주제에 대한 설명
- 정보 보안

- 보안은 특정 분야의 종속 개념이 아니고 IT 업계 전반에서 고려해야 하므로 개발자, 서버엔지니어, 네트워크 엔지니어, 보안 엔지니어 모두 고민해야 하는 영역이다.

**정보 보안의 정의**

- 정보 보안은 **다양한 위협으로부터 정보를 보호하는 것**을 의미함.
- **보안의 정의를 확장하면**, 정보의 생산 및 유지 과정에서 **위험을 방지하고 안전한 상태를 유지하는 활동**을 포함.
- 정보 보안을 **생산자와 소비자 관점에서 구분**할 수 있음.
    - 생산자: 정보 저장 시스템 보호 및 유출 방지.
    - 소비자: 정보를 안전하게 운영하고 외부 유출을 방지.
- 정보 보안의 개념은 **출처나 관점에 따라 다소 차이가 있을 수 있음**.

 정보 보안의 3대 요소

정보 보안의 필수 요소로 **기밀성, 무결성, 가용성**이 있으며, 이를 **CIA(Confidentiality, Integrity, Availability) 삼원칙**이라고도 함.

1. **기밀성(Confidentiality)**
    - **허가되지 않은 접근을 방지**하여 정보가 외부에 노출되지 않도록 보호.
    - 예시: 데이터 암호화, 접근 제어 정책 적용.
2. **무결성(Integrity)**
    - **데이터의 변조 및 조작을 방지**하여 정보가 정확하고 신뢰할 수 있도록 보장.
    - 예시: 디지털 서명, 해시 함수 사용.
3. **가용성(Availability)**
    - **필요한 사람이 필요한 정보에 지속적으로 접근 가능하도록 보장**.
    - 예시: 24x365(연중무휴) 서비스 운영, 장애 대응 시스템 구축.

 정보 보안의 정의 (확장 개념)

- 기존의 **3대 요소(CIA: 기밀성, 무결성, 가용성)** 외에도 추가적인 요소들이 존재함:
    - **진정성(Authenticity)**: 정보가 신뢰할 수 있는 출처에서 온 것인지 검증.
    - **책임성(Accountability)**: 정보 사용자의 행동을 추적하고 기록.
    - **부인 방지(Non-Repudiation)**: 사용자가 특정 행위를 부인하지 못하도록 보장.
    - **신뢰성(Reliability)**: 정보가 지속적으로 신뢰할 수 있도록 유지.
- 여러 기관에서는 정보 보안을 보다 간단하게 정의하기도 함:
    - **조직의 지적 자산을 보호하는 절차** (Pipkin, 2000)
    - **인가된 사용자만이(기밀성) 정확하고 완전한 정보(무결성)에 접근 가능(가용성)하도록 하는 일련의 작업** (ISACA, 2008)

**네트워크 보안의 개념**

- **네트워크 보안**은 **정보 수집, 저장, 검색, 전송 과정에서 발생할 수 있는 위험을 예방하고 대응하는 기술 및 관리적 방법**을 의미.
- 정보가 이동하는 과정에서 **도난, 변조, 유출 등의 위협을 방지**하는 것이 목적.

---

 **네트워크 보안의 주요 목표**

1. **1차 목표**:
    - 정보가 저장된 시스템을 **공격자로부터 보호**하고 시스템의 정상적인 운영을 유지.
    - 외부의 공격으로부터 **네트워크 자체를 보호**하는 역할.
2. **2차 목표**:
    - 정보가 네트워크를 통해 이동할 때 발생할 수 있는 **유출, 변조 방지**.
    - 복제, 이동 등을 통해 정보가 유출되는 문제 해결.

---

 **네트워크 보안의 중요성**

- **네트워크는 중요한 정보가 오가는 경로**로, 보호되지 않으면 정보 유출 가능성이 큼.
- 네트워크 보안이 없다면 **정보 이동이 어려워지고, 활용성이 낮아짐**.
- **외부 공격자는 네트워크 자체를 공격 대상으로 삼기도 하며**, 이를 장악하면 **다양한 시스템을 침해할 수 있음**.
- 네트워크를 안전하게 보호하면 **정보 보안의 1차 방어선** 역할을 함.

---

 **네트워크 보안을 위한 접근 방식**

1. **네트워크 공격 및 방어 방식 이해**
    - 네트워크를 활용한 다양한 공격 기법을 이해하고, 이를 방어하는 장비와 기술을 학습.
2. **네트워크 보안 발전 방향**
    - 기존에는 **TOP-DOWN(상위에서 하위로) 방식**이었으나,현재는 **BOTTOM-UP(하위에서 상위로) 방식**으로 발전 중.
3. **보안 장비 활용**
    - **방화벽, IDS/IPS(침입 탐지 및 방지 시스템), VPN, 암호화 기술** 등을 활용하여 보안을 강화.

 **네트워크 보안의 주요 개념**

 **1. 네트워크 보안의 목표**

- 외부 네트워크로부터 내부 네트워크를 보호하는 것.
- **신뢰할 수 있는 네트워크(Trust)** 와 **신뢰할 수 없는 네트워크(Untrust)** 로 구분.

 **2. DMZ (DeMilitarized Zone, 비무장 지대)**

- 내부 네트워크이지만, 외부 사용자에게 공개해야 하는 서비스가 있는 경우 **DMZ 네트워크**를 활용.
- 일반적으로 인터넷에 공개되는 서비스(웹 서버 등)는 DMZ에 배치.

 **3. 네트워크 보안의 두 가지 유형**

1. **인터넷 시큐어 게이트웨이(Internet Secure Gateway)**
    - **트러스트(Trust) 또는 DMZ에서 언트러스트(Untrust) 네트워크와의 통신을 통제**.
2. **데이터 센터 시큐어 게이트웨이(Data Center Secure Gateway)**
    - **언트러스트(Untrust) 네트워크에서 트러스트(Trust) 또는 DMZ로의 통신을 통제**.

 **4. 보안 장비 및 성능 요구 사항**

- 네트워크 보안 장비는 사용 목적에 따라 요구되는 성능과 기능이 다름.
- **인터넷으로 나갈 때**: 대량의 요청을 필터링하고 처리하는 기능 필요.
- **데이터 센터 게이트웨이**: 고성능이 요구되며, 외부 공격을 직접 방어해야 함.

 **1. 인터넷 시큐어 게이트웨이 (Internet Secure Gateway)**

- **인터넷과 내부 네트워크(Trust) 사이의 보안을 담당**하는 장비.
- 주요 보안 장비:
    - **방화벽(Firewall)**: 외부 위협으로부터 내부 네트워크 보호.
    - **SWG(Secure Web Gateway)**: 웹 기반 보안 위협 방어.
    - **웹 필터(Web Filter)**: 유해한 웹사이트 접속 차단.
    - **애플리케이션 컨트롤(Application Control)**: 특정 애플리케이션의 사용 제한.
    - **샌드박스(Sandbox)**: 의심스러운 파일을 격리하여 실행 및 분석.

- 내부 사용자가 인터넷(Untrust)과 통신할 때 **보안을 제공하고 불필요한 트래픽을 통제**.

### **2. 데이터 센터 시큐어 게이트웨이 (Data Center Secure Gateway)**

- **데이터 센터와 외부 네트워크(Untrust) 사이의 보안을 담당**하는 장비.
- 주요 보안 장비:
    - **방화벽(Firewall)**: 네트워크 보호.
    - **IPS(Intrusion Prevention System)**: 침입 차단 시스템.
    - **DCSG(Data Center Secure Gateway)**: 데이터 센터 전용 보안 게이트웨이.
    - **WAF(Web Application Firewall)**: 웹 애플리케이션 보호.
    - **Anti-DDoS**: 분산 서비스 거부 공격(DDoS) 방어.

- 데이터 센터에서 제공하는 서비스가 **외부 공격에 의해 영향을 받지 않도록 보호**.
- 인터넷과의 통신에서 **보안 정책을 적용하여 내부 네트워크 보호**.

 **네트워크 보안 정책 수립에 따른 분류**

 **1. 화이트리스트(White List) 기반 보안**

- **허용된 통신만 가능하도록 설정**하는 방식.
- 일반적으로 **회사 내부 방화벽**에서 필요한 서비스만 허용하는 경우 사용.
- 인터넷 전체에 대한 화이트리스트를 만들기 어렵기 때문에 **일반적으로 특정 IP 및 통신 정보를 명확히 아는 경우 사용**.

 **2. 블랙리스트(Black List) 기반 보안**

- **위협으로 판단된 IP, 패킷, 공격 패턴을 데이터베이스에 저장하고 차단**하는 방식.
- IPS, 안티바이러스, WAF 등 네트워크 장비는 일반적으로 **블랙리스트 기반 방어** 기법을 제공.
- **공격을 탐지하고 차단하는 시스템에서는 블랙리스트 방식이 효과적**.

---

 **네트워크 보안 정책 수립 시 고려 사항**

- **화이트리스트 방식**은 **보안성이 높지만 관리가 어려움**. (모든 허용 목록을 직접 설정해야 함)
- **블랙리스트 방식**은 **운영이 쉬운 반면, 새로운 공격 유형이 등장하면 즉시 대응이 어려울 수 있음**.
- 일반적으로 **화이트리스트와 블랙리스트 방식을 병행하여 운영**하는 경우가 많음.

---

**보안 정책 선택**

- 최근 보안 위협이 증가하면서 **화이트리스트 기반 정책이 많이 사용됨**.
- 화이트리스트 정책은 **세부적인 통제와 관리 인력이 필요**.
- **관리 인력이 부족한 경우, 블랙리스트 기반 방어 정책이 더욱 안정적인 운영 방법**.

 **탐지 오류(정탐, 오탐, 미탐)**

 **1. 탐지 오류 개념**

- 보안 시스템이 공격을 탐지할 때 **예상과 다른 결과**가 나올 수 있음.
- 이를 **정탐(정상 탐지), 오탐(잘못된 탐지), 미탐(탐지 실패)** 로 구분.
- **이러한 개념은 네트워크 보안뿐만 아니라 IT 및 과학 실험에서도 사용**됨.

**2. 탐지 유형 (4가지 경우)**

| 예상된 상황 | 탐지 결과 | 설명 |
| --- | --- | --- |
| **공격 상황** | **True Positive (정탐)** | 실제 공격이 발생했고, 정상적으로 탐지됨 |
| **공격 상황** | **False Negative (미탐)** | 실제 공격이 있었지만 탐지되지 않음 (보안 위협) |
| **정상 상황** | **False Positive (오탐)** | 공격이 없었지만 보안 시스템이 잘못 탐지함 |
| **정상 상황** | **True Negative (정상 탐지)** | 공격이 없고, 정상적으로 탐지되지 않음 |

 **3. 주요 고려사항**

- **True Positive(정탐)를 극대화**하면서, False Positive(오탐)와 False Negative(미탐)를 최소화하는 것이 중요.
- *오탐(False Positive)**이 많으면 불필요한 경고 발생 → **운영 부담 증가**.
- *미탐(False Negative)**이 많으면 실제 공격을 놓침 → **보안 위협 증가**.

 **DDoS 방어 장비 동작 방식**

 **1. DDoS 방어 방식 개요**

- **DDoS 장비는 다양한 기법을 사용하여 DDoS 여부를 판단하고 차단**.
- **주요 방어 기법**:
    - **프로파일링 기반 탐지**: 평소 데이터 흐름을 학습하여 비정상적인 트래픽을 감지.
    - **데이터 패턴 분석**: 대역폭, 세션량, 초기 접속량, 프로토콜별 사용량 등을 비교하여 이상 여부 판단.
    - **보안 데이터베이스 기반 방어**: 알려진 공격 패턴 및 **IP 블랙리스트** 활용.

 **2. DDoS 방어 서비스 방식**

- **DDoS 방어 장비는 클라우드 서비스, 회선 사업자 방어 서비스, 사내 방어 장비 형태로 제공**.
- 회선 사업자(ISP)와 협력하여 **DDoS 탐지 및 차단을 수행하는 서비스도 증가**.

 **3. DDoS 공격 탐지 및 차단 과정**

1. **DDoS 탐지 및 차단 (인라인 방식)**
    - DDoS 공격을 탐지하면 **공격 트래픽을 실시간으로 차단**.
    - 서버로 가는 공격을 직접 필터링하여 **서비스 보호**.
2. **DDoS 탐지 및 우회 처리 (아웃 오브 패스 방식)**
    - 공격을 탐지하면 **트래픽 경로를 변경**하여 우회 처리.
    - 방어 장비(ISP 내부)가 공격 IP를 차단하고, 정상 트래픽만 허용.

 **4. 주요 DDoS 방어 기법**

- **공격 트래픽 분석**: 특정 공격 패턴을 탐지하여 차단.
- **IP 블랙리스트 기반 차단**: 공격에 사용된 IP 리스트를 공유하고 방어 장비에서 IP를 필터링.
- **ISP 및 CSP(클라우드 보안 서비스) 협력**: 대규모 공격에 대비한 방어 시스템 구축.

 **1. DDoS 공격 개요**

- **DDoS 공격은 다양한 기법을 사용하여 네트워크, 프로토콜, 애플리케이션 계층을 마비시키는 공격**.
- 주요 공격 유형:
    1. **볼류메트릭(Volumetric) 공격**: 대량의 트래픽으로 **네트워크 회선을 가득 채우는 공격**.
    2. **프로토콜(Protocol) 공격**: 3, 4계층의 취약점을 이용하여 **서버 자원을 고갈시키는 공격**.
    3. **애플리케이션(Application) 공격**: 7계층(웹, DNS 등) 취약점을 악용하는 공격.

 **3. DDoS 공격의 특징**

- **볼류메트릭 공격**: 대역폭을 고갈시키는 방식 → **대규모 트래픽 생성**.
- **프로토콜 공격**: 서버의 **TCP/IP 취약점**을 노려 **자원 고갈** 유도.
- **애플리케이션 공격**: 웹 서버나 **DNS 등의 서비스에 직접 타격**.

 **방화벽 동작 방식**

 **1. 방화벽의 기본 동작 원리**

- **방화벽은 패킷을 검사하여 허용 또는 차단하는 역할을 수행**.
- 패킷이 들어오면 **세션 테이블과 포워딩 테이블을 확인**하여 처리.

---

 **2. 방화벽의 처리 단계**

1. **세션 상태 테이블 확인**
    - 패킷이 들어오면 **기존에 설정된 세션 정보가 있는지 확인**.
2. **세션 테이블에 정보가 있을 경우 → 포워딩 테이블 확인**
    - **라우팅 정보 및 ARP 테이블을 참고**하여 패킷을 전달할 경로를 결정.
3. **세션 테이블에 정보가 없을 경우 → 방화벽 정책 확인**
    - 사전에 설정된 방화벽 정책을 따라 **패킷을 허용 또는 차단**.
4. **방화벽 정책 탐색 후에도 적용되는 정책이 없으면 차단**
    - **Implicit Denial(암시적 거부) 원칙**에 따라 기본적으로 차단.
5. **허용 규칙이 있으면 세션 테이블에 기록**
    - 해당 패킷이 **정상적인 통신으로 인정되면 세션 테이블에 추가**.
6. **포워딩 테이블 확인 (라우팅 및 ARP 포함)**
    - 패킷이 정상적인 경로로 전달될 수 있는지 확인.
7. **포워딩 테이블에 정보가 있을 경우 → 패킷 전달**
    - 적절한 **인터페이스를 통해 패킷을 포워딩**.
8. **포워딩 테이블에 정보가 없을 경우 → 패킷 폐기**
    - 목적지를 찾을 수 없으므로 **패킷을 폐기(drop)**.

 **3. 방화벽 동작의 핵심 개념**

- **세션 테이블**: 기존 연결 정보를 저장하여 **연결된 세션의 지속성을 유지**.
- **포워딩 테이블**: 라우팅 정보 및 ARP 테이블을 기반으로 **패킷의 전달 경로 결정**.
- **Implicit Denial(암시적 거부)**: 명확한 허용 정책이 없으면 **기본적으로 차단**.

### 주제 2: 패킷 트레이서 방화벽 실습
- 방화벽 설정
#ASA
```shell
enable
config terminal
enable password ASApwd  (관리자 패스워드 설정)
exit
running-config( 설정된 패스워드 확인)
#VLAN 설정
config terminal
interface vlan 2
ip address 203.237.20.253 255.255.255.0
no shut
exit
```
inPC IP 설정 
- DHCP
    - IP 192.168.1.5
    - 서브넷 마스크 255.255.255.0
    - 게이트 웨이 192.168.1.1 (ASA inside주소로 고정)

outPC ip 설정
`203.237.10.10 255.255.255.0  (192.168.10.254)`
라우터 설정
```shell
enable
configure terminal
interface fa0/1  (router0 -> asa)
ip address 203.237.20.254 255.255.255.0
no shut
interface fa0/0 
ip address 203.237.10.254 255.255.255.0 (router0 ->outPC)
no shut
```
-ASA 라우팅 설정
```shell 어떤 목적지 주소를 갖는 패킷이든 외부망의 rotuer0인 
203.207.20.254 로 전송

#ASA
configure terminal
route 0.0.0.0 0.0.0.0 203.237.20.254
exit
```

- nat 설정

**1. 사설 IP 주소는 인터넷에서 직접 인식되지 않음**

- **사설 IP(Private IP)** 주소는 **RFC 1918 표준에 따라 공인 네트워크(인터넷)에서는 직접 라우팅되지 않음**.
- **Router0은 사설 IP 주소를 이해하지 못하므로, 패킷을 어디로 보내야 할지 알 수 없음**.

---

**2. ICMP 응답 패킷이 반환되지 않음**

- ICMP 요청은 사설 IP에서 보냈지만, **응답 패킷은 목적지가 사설 IP이므로 Router0이 이를 라우팅할 수 없음**.
- 즉, **응답 패킷이 ASA0을 통과하지 못하고 폐기됨**.
- **해결 방법:** **ASA0이 NAT 변환 테이블을 유지하여, 응답 패킷을 적절한 사설 IP 주소로 변환 후 전달**.

```shell
#ASA
configure terminal
object network in2out
subnet 192.168.1.0 255.255.255.0
nat (inside,outside) dynamic interface
exit
```

- ACL 설정
```shell
#ASA
configure terminal
access-list out2in extended permit icmp any any
access-group out2in in interface outside
exit
accsess-list
```


### 오늘의 도전 과제와 해결 방법
- 도전 과제 1: 방화벽과 서브네팅 실습 활용하여 네트워크 구성도와 실습 진행

### 오늘의 회고
- - 패킷 트레이서를 활용한 실습을 진행하면서, 가상 환경에서의 네트워크 구성에 흥미를 갖게 되었다.

실습이 오래 걸렸지만 그만큼 트러블 슈팅하면서 많이 배운 것 같다. 가상 환경에서의 시뮬레이션을 돌려보고 하는 것이 재미있었다.

앞으로의 도커나 클라우드 실습도 기대가 된다.

### 참고 자료 및 링크
- [링크 제목](URL)
- [링크 제목](URL)
